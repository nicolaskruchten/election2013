<html>
<head>
	<title>Ã‰lection 2013</title>
	<meta charset="utf-8"> 
    <script type="text/javascript" src="jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="coffee-script.js"></script>
    <script type="text/javascript" src="protovis.min.js"></script>
    <script type="text/coffeescript" src="helpers.coffee"></script>
	<script type="text/coffeescript" src="mayors.coffee"> </script>
	<script type="text/coffeescript" src="council.coffee"> </script>
</head>
<style>
.container {
	position: absolute; 
	top:0px; 
	left: 0px; 
	width: 100%; 
	height: 100%; 
	border: 1px solid white;
}
</style>
<body>

<div id="bl" style="position: relative; width: 500px; height: 300px;">
	<div id="mayors" class="container"></div>
	<div id="mc" class="container"></div>
	<div id="cv" class="container"></div>
	<div id="ca" class="container"></div>
	<div id="all" class="container"></div>
</div>



<script type="text/coffeescript">

cycle = ["mayors", "mc", "cv", "ca", "all"]
loopPos = 0

swap = (cycleIn, loopPosIn) ->
		$("#"+cycleIn[loopPosIn]).fadeOut 2000
		loopPosIn = loopPosIn+1 % cycleIn.length
		$("#"+cycleIn[loopPosIn]).fadeIn 2000, -> setTimeout (-> swap(cycleIn, loopPosIn)), 2000

window.refreshData ->
	window.updateMayors("mayors")
	window.updateCouncil("mc", "MC")
	window.updateCouncil("cv", "CV")
	window.updateCouncil("ca", "CA")
	window.updateCouncil("all")
	$(".container").hide()
	$("#mayors").show()
	setTimeout (-> swap(cycle, loopPos)), 2000


</script>

</body>
</html>